FROM node:16-alpine3.14

WORKDIR /usr/src/app

COPY . .

RUN npm install

RUN npm run start_prod

ARG DATABASE_URL
ARG DATABASE_NAME
ARG REDIS_URL

ENV DATABASE_URL=$DATABASE_URL
ENV DATABASE_NAME=$DATABASE_NAME
ENV REDIS_URL=$DATABASE_NAME

EXPOSE 4000

CMD ["node", "dist/server.js"]
